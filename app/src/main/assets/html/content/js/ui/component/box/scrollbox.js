/*!
 * iScroll v4.2.5 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
!function(o,t,e){"use strict";function r(o){return""===s?o:(o=o.charAt(0).toUpperCase()+o.substr(1),s+o)}if(o&&"undefined"==typeof o.Scroll){var l=Math,n=e.createElement("div").style,s=function(){for(var o,t="t,webkitT,MozT,msT,OT".split(","),e=0,r=t.length;e<r;e++)if(o=t[e]+"ransform",o in n)return t[e].substr(0,t[e].length-1);return!1}(),i=s?"-"+s.toLowerCase()+"-":"",a=r("transform"),c=r("transitionProperty"),p=r("transitionDuration"),m=r("transformOrigin"),h=r("transitionTimingFunction"),u=r("transitionDelay"),S=/android/gi.test(navigator.appVersion),d=/iphone|ipad/gi.test(navigator.appVersion),b=/hp-tablet/gi.test(navigator.appVersion),f=r("perspective")in n,g="undefined"!=typeof o.hasTouch?o.hasTouch:"ontouchstart"in t&&!b,x=s!==!1,v=r("transition")in n,y="onorientationchange"in t?"orientationchange":"resize",T=g?"touchstart":"mousedown",Y=g?"touchmove":"mousemove",X=g?"touchend":"mouseup",w=g?"touchcancel":"mouseup",_=function(){if(s===!1)return!1;var o={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return o[s]}(),z=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(o){return setTimeout(o,1)}}(),M=function(){return t.cancelRequestAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||clearTimeout}(),E=function(o,t){if(o&&o.nodeType){for(var r=0,l=o,n=!1;l&&l.nodeType&&l!=e.documentElement&&r<50;){if(1==l.nodeType&&"iscroll-wrapper"==l.getAttribute("x-wade-ui-tag")&&("undefined"==typeof t||"h"==t&&"true"==l.getAttribute("hScroll")||"v"==t&&"true"==l.getAttribute("vScroll"))){n=!0;break}l=l.parentNode,r++}return n?l:void 0}},D=f?" translateZ(0)":"",P=function(o,r){var l,n=this;n.wrapper="object"==typeof o?o:e.getElementById(o),n.wrapper.style.overflow="hidden",n.scroller=n.wrapper.children[0],n.wrapper&&n.wrapper.nodeType&&n.wrapper.setAttribute("x-wade-ui-tag","iscroll-wrapper"),n.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:S,hideScrollbar:d,fadeScrollbar:d&&f,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(o){o.originalEvent&&(o=o.originalEvent);var t=o.target;t&&(t="tagName"in t?t:t.parentNode,1==t.nodeType&&t.nodeName&&"INPUT"!=t.nodeName&&"SELECT"!=t.nodeName&&"TEXTAREA"!=t.nodeName&&o.preventDefault())},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onPosition:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(l in r)n.options[l]=r[l];n.x=n.options.x,n.y=n.options.y,n.options.useTransform=x&&n.options.useTransform,n.options.hScrollbar=n.options.hScroll&&n.options.hScrollbar,n.options.vScrollbar=n.options.vScroll&&n.options.vScrollbar,n.options.zoom=n.options.useTransform&&n.options.zoom,n.options.useTransition=v&&n.options.useTransition,n.options.zoom&&S&&(D=""),n.scroller.style[c]=n.options.useTransform?i+"transform":"top left",n.scroller.style[p]="0",n.scroller.style[m]="0 0",n.options.useTransition&&(n.scroller.style[h]="cubic-bezier(0.33,0.66,0.66,1)"),n.options.useTransform?n.scroller.style[a]="translate("+n.x+"px,"+n.y+"px)"+D:n.scroller.style.cssText+=";position:absolute;top:"+n.y+"px;left:"+n.x+"px",n.options.useTransition&&(n.options.fixedScrollbar=!0),n.refresh(),n._bind(y,t),n._bind(T),g||"none"!=n.options.wheelAction&&(n._bind("DOMMouseScroll"),n._bind("mousewheel")),n.options.checkDOMChanges&&(n.checkDOMTime=setInterval(function(){n._checkDOMChanges()},500))};P.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(o){var t=this;switch(o.type){case T:if(!g&&0!==o.button)return;t._start(o);break;case Y:t._move(o);break;case X:case w:t._end(o);break;case y:t._resize();break;case"DOMMouseScroll":case"mousewheel":t._wheel(o);break;case _:t._transitionEnd(o)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(o){var t,r=this;return r[o+"Scrollbar"]?(r[o+"ScrollbarWrapper"]||(t=e.createElement("div"),r.options.scrollbarClass?t.className=r.options.scrollbarClass+o.toUpperCase():t.style.cssText="position:absolute; z-index:100;"+("h"==o?"height:0.5em; bottom:0.07em; left:0.14em; right:"+(r.vScrollbar?"0.43":"0.14")+"em":"width:0.43em; bottom:"+(r.hScrollbar?"0.43":"0.14")+"em; top:0.14em; right:0.07em"),t.style.cssText+=";pointer-events:none;"+i+"transition-property:opacity;"+i+"transition-duration:"+(r.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(r.options.hideScrollbar?"0":"1"),r.wrapper.appendChild(t),r[o+"ScrollbarWrapper"]=t,t=e.createElement("div"),r.options.scrollbarClass||(t.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.2);"+i+"background-clip:padding-box;"+i+"box-sizing:border-box;"+("h"==o?"height:100%":"width:100%")+";"+i+"border-radius:0.21em; border-radius:0.21em"),t.style.cssText+=";pointer-events:none;"+i+"transition-property:"+i+"transform;"+i+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+i+"transition-duration:0;"+i+"transform: translate(0,0)"+D,r.options.useTransition&&(t.style.cssText+=";"+i+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),r[o+"ScrollbarWrapper"].appendChild(t),r[o+"ScrollbarIndicator"]=t),"h"==o?(r.hScrollbarSize=r.hScrollbarWrapper.clientWidth,r.hScrollbarIndicatorSize=l.max(l.round(r.hScrollbarSize*r.hScrollbarSize/r.scrollerW),8),r.hScrollbarIndicator.style.width=r.hScrollbarIndicatorSize+"px",r.hScrollbarMaxScroll=r.hScrollbarSize-r.hScrollbarIndicatorSize,r.hScrollbarProp=r.hScrollbarMaxScroll/r.maxScrollX):(r.vScrollbarSize=r.vScrollbarWrapper.clientHeight,r.vScrollbarIndicatorSize=l.max(l.round(r.vScrollbarSize*r.vScrollbarSize/r.scrollerH),8),r.vScrollbarIndicator.style.height=r.vScrollbarIndicatorSize+"px",r.vScrollbarMaxScroll=r.vScrollbarSize-r.vScrollbarIndicatorSize,r.vScrollbarProp=r.vScrollbarMaxScroll/r.maxScrollY),void r._scrollbarPos(o,!0)):void(r[o+"ScrollbarWrapper"]&&(x&&(r[o+"ScrollbarIndicator"].style[a]=""),r[o+"ScrollbarWrapper"].parentNode.removeChild(r[o+"ScrollbarWrapper"]),r[o+"ScrollbarWrapper"]=null,r[o+"ScrollbarIndicator"]=null))},_resize:function(){var o=this;setTimeout(function(){o.refresh()},S?200:0)},_pos:function(o,t){this.zoomed||(o=this.hScroll?o:0,t=this.vScroll?t:0,this.options.useTransform?this.scroller.style[a]="translate("+o+"px,"+t+"px) scale("+this.scale+")"+D:(o=l.round(o),t=l.round(t),this.scroller.style.left=o+"px",this.scroller.style.top=t+"px"),this.x=o,this.y=t,this._scrollbarPos("h"),this._scrollbarPos("v"),this.options.onPosition&&this.options.onPosition.call(this,o,t,a,D))},_scrollbarPos:function(o,t){var e,r=this,n="h"==o?r.x:r.y;r[o+"Scrollbar"]&&(n=r[o+"ScrollbarProp"]*n,n<0?(r.options.fixedScrollbar||(e=r[o+"ScrollbarIndicatorSize"]+l.round(3*n),e<8&&(e=8),r[o+"ScrollbarIndicator"].style["h"==o?"width":"height"]=e+"px"),n=0):n>r[o+"ScrollbarMaxScroll"]&&(r.options.fixedScrollbar?n=r[o+"ScrollbarMaxScroll"]:(e=r[o+"ScrollbarIndicatorSize"]-l.round(3*(n-r[o+"ScrollbarMaxScroll"])),e<8&&(e=8),r[o+"ScrollbarIndicator"].style["h"==o?"width":"height"]=e+"px",n=r[o+"ScrollbarMaxScroll"]+(r[o+"ScrollbarIndicatorSize"]-e))),r[o+"ScrollbarWrapper"].style[u]="0",r[o+"ScrollbarWrapper"].style.opacity=t&&r.options.hideScrollbar?"0":"1",r[o+"ScrollbarIndicator"].style[a]="translate("+("h"==o?n+"px,0)":"0,"+n+"px)")+D)},_start:function(o){var t,r,n,s,i,c=this,p=g?o.touches[0]:o;c.enabled&&(c.options.onBeforeScrollStart&&c.options.onBeforeScrollStart.call(c,o),(c.options.useTransition||c.options.zoom)&&c._transitionTime(0),c.moved=!1,c.animating=!1,c.zoomed=!1,c.distX=0,c.distY=0,c.absDistX=0,c.absDistY=0,c.dirX=0,c.dirY=0,c.options.zoom&&g&&o.touches.length>1&&(s=l.abs(o.touches[0].pageX-o.touches[1].pageX),i=l.abs(o.touches[0].pageY-o.touches[1].pageY),c.touchesDistStart=l.sqrt(s*s+i*i),c.originX=l.abs(o.touches[0].pageX+o.touches[1].pageX-2*c.wrapperOffsetLeft)/2-c.x,c.originY=l.abs(o.touches[0].pageY+o.touches[1].pageY-2*c.wrapperOffsetTop)/2-c.y,c.options.onZoomStart&&c.options.onZoomStart.call(c,o)),c.options.momentum&&(c.options.useTransform?(t=getComputedStyle(c.scroller,null)[a].replace(/[^0-9\-.,]/g,"").split(","),r=+(t[12]||t[4]),n=+(t[13]||t[5])):(r=+getComputedStyle(c.scroller,null).left.replace(/[^0-9-]/g,""),n=+getComputedStyle(c.scroller,null).top.replace(/[^0-9-]/g,"")),r==c.x&&n==c.y||(c.options.useTransition?c._unbind(_):M(c.aniTime),c.steps=[],c._pos(r,n),c.options.onScrollEnd&&c.options.onScrollEnd.call(c))),c.absStartX=c.x,c.absStartY=c.y,c.startX=c.x,c.startY=c.y,c.pointX=p.pageX,c.pointY=p.pageY,c.startTime=o.timeStamp||Date.now(),c.options.onScrollStart&&c.options.onScrollStart.call(c,o),c._bind(Y,e),c._bind(X,e),c._bind(w,e))},_move:function(o){var t,e,r,n=this,s=g?o.touches[0]:o,i=s.pageX-n.pointX,c=s.pageY-n.pointY,p=n.x+i,m=n.y+c,h=o.timeStamp||Date.now();if(n.options.onBeforeScrollMove&&n.options.onBeforeScrollMove.call(n,o),n.options.zoom&&g&&o.touches.length>1)return t=l.abs(o.touches[0].pageX-o.touches[1].pageX),e=l.abs(o.touches[0].pageY-o.touches[1].pageY),n.touchesDist=l.sqrt(t*t+e*e),n.zoomed=!0,r=1/n.touchesDistStart*n.touchesDist*this.scale,r<n.options.zoomMin?r=.5*n.options.zoomMin*Math.pow(2,r/n.options.zoomMin):r>n.options.zoomMax&&(r=2*n.options.zoomMax*Math.pow(.5,n.options.zoomMax/r)),n.lastScale=r/this.scale,p=this.originX-this.originX*n.lastScale+this.x,m=this.originY-this.originY*n.lastScale+this.y,this.scroller.style[a]="translate("+p+"px,"+m+"px) scale("+r+")"+D,void(n.options.onZoom&&n.options.onZoom.call(n,o));if(n.pointX=s.pageX,n.pointY=s.pageY,(p>0||p<n.maxScrollX)&&(p=n.options.bounce?n.x+i/2:p>=0||n.maxScrollX>=0?0:n.maxScrollX),(m>n.minScrollY||m<n.maxScrollY)&&(m=n.options.bounce?n.y+c/2:m>=n.minScrollY||n.maxScrollY>=0?n.minScrollY:n.maxScrollY),n.distX+=i,n.distY+=c,n.absDistX=l.abs(n.distX),n.absDistY=l.abs(n.distY),!(n.absDistX<6&&n.absDistY<6)){n.options.lockDirection&&(n.absDistX>n.absDistY+5?(m=n.y,c=0):n.absDistY>n.absDistX+5&&(p=n.x,i=0));var u=E(o.target);u&&u==n.wrapper||("true"==u.getAttribute("hScroll")&&(p=n.x,i=0),"true"==u.getAttribute("vScroll")&&(m=n.y,c=0)),n.moved=!0,n._pos(p,m),n.dirX=i>0?-1:i<0?1:0,n.dirY=c>0?-1:c<0?1:0,h-n.startTime>300&&(n.startTime=h,n.startX=n.x,n.startY=n.y),n.options.onScrollMove&&n.options.onScrollMove.call(n,o)}},_end:function(o){if(!g||0===o.touches.length){var t,r,n,s,i,c,m,h=this,u=g?o.changedTouches[0]:o,S={dist:0,time:0},d={dist:0,time:0},b=(o.timeStamp||Date.now())-h.startTime,f=h.x,x=h.y;if(h._unbind(Y,e),h._unbind(X,e),h._unbind(w,e),h.options.onBeforeScrollEnd&&h.options.onBeforeScrollEnd.call(h,o),h.zoomed)return m=h.scale*h.lastScale,m=Math.max(h.options.zoomMin,m),m=Math.min(h.options.zoomMax,m),h.lastScale=m/h.scale,h.scale=m,h.x=h.originX-h.originX*h.lastScale+h.x,h.y=h.originY-h.originY*h.lastScale+h.y,h.scroller.style[p]="200ms",h.scroller.style[a]="translate("+h.x+"px,"+h.y+"px) scale("+h.scale+")"+D,h.zoomed=!1,h.refresh(),void(h.options.onZoomEnd&&h.options.onZoomEnd.call(h,o));if(!h.moved)return g&&(h.doubleTapTimer&&h.options.zoom?(clearTimeout(h.doubleTapTimer),h.doubleTapTimer=null,h.options.onZoomStart&&h.options.onZoomStart.call(h,o),h.zoom(h.pointX,h.pointY,1==h.scale?h.options.doubleTapZoom:1),h.options.onZoomEnd&&setTimeout(function(){h.options.onZoomEnd.call(h,o)},200)):this.options.handleClick&&(h.doubleTapTimer=setTimeout(function(){for(h.doubleTapTimer=null,t=u.target;1!=t.nodeType;)t=t.parentNode;"SELECT"!=t.tagName&&"INPUT"!=t.tagName&&"TEXTAREA"!=t.tagName&&(r=e.createEvent("MouseEvents"),r.initMouseEvent("click",!0,!0,o.view,1,u.screenX,u.screenY,u.clientX,u.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,0,null),r._fake=!0,t.dispatchEvent(r))},h.options.zoom?250:0))),h._resetPos(400),void(h.options.onTouchEnd&&h.options.onTouchEnd.call(h,o));if(b<300&&h.options.momentum&&(S=f?h._momentum(f-h.startX,b,-h.x,h.scrollerW-h.wrapperW+h.x,h.options.bounce?h.wrapperW:0):S,d=x?h._momentum(x-h.startY,b,-h.y,h.maxScrollY<0?h.scrollerH-h.wrapperH+h.y-h.minScrollY:0,h.options.bounce?h.wrapperH:0):d,f=h.x+S.dist,x=h.y+d.dist,(h.x>0&&f>0||h.x<h.maxScrollX&&f<h.maxScrollX)&&(S={dist:0,time:0}),(h.y>h.minScrollY&&x>h.minScrollY||h.y<h.maxScrollY&&x<h.maxScrollY)&&(d={dist:0,time:0})),S.dist||d.dist)return i=l.max(l.max(S.time,d.time),10),h.options.snap&&(n=f-h.absStartX,s=x-h.absStartY,l.abs(n)<h.options.snapThreshold&&l.abs(s)<h.options.snapThreshold?h.scrollTo(h.absStartX,h.absStartY,200):(c=h._snap(f,x),f=c.x,x=c.y,i=l.max(c.time,i))),h.scrollTo(l.round(f),l.round(x),i),void(h.options.onTouchEnd&&h.options.onTouchEnd.call(h,o));if(h.options.snap)return n=f-h.absStartX,s=x-h.absStartY,l.abs(n)<h.options.snapThreshold&&l.abs(s)<h.options.snapThreshold?h.scrollTo(h.absStartX,h.absStartY,200):(c=h._snap(h.x,h.y),c.x==h.x&&c.y==h.y||h.scrollTo(c.x,c.y,c.time)),void(h.options.onTouchEnd&&h.options.onTouchEnd.call(h,o));h._resetPos(200),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,o)}},_resetPos:function(o){var t=this,e=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,r=t.y>=t.minScrollY||t.maxScrollY>0?t.minScrollY:t.y<t.maxScrollY?t.maxScrollY:t.y;return e==t.x&&r==t.y?(t.moved&&(t.moved=!1,t.options.onScrollEnd&&t.options.onScrollEnd.call(t)),t.hScrollbar&&t.options.hideScrollbar&&("webkit"==s&&(t.hScrollbarWrapper.style[u]="300ms"),t.hScrollbarWrapper.style.opacity="0"),void(t.vScrollbar&&t.options.hideScrollbar&&("webkit"==s&&(t.vScrollbarWrapper.style[u]="300ms"),t.vScrollbarWrapper.style.opacity="0"))):void t.scrollTo(e,r,o||0)},_wheel:function(o){var t,e,r,l,n,s=this;if("wheelDeltaX"in o)t=o.wheelDeltaX,e=o.wheelDeltaY;else if("wheelDelta"in o)t=e=o.wheelDelta;else{if(!("detail"in o))return;t=e=3*-o.detail}return"zoom"==s.options.wheelAction?(n=s.scale*Math.pow(2,1/3*(e?e/Math.abs(e):0)),n<s.options.zoomMin&&(n=s.options.zoomMin),n>s.options.zoomMax&&(n=s.options.zoomMax),void(n!=s.scale&&(!s.wheelZoomCount&&s.options.onZoomStart&&s.options.onZoomStart.call(s,o),s.wheelZoomCount++,s.zoom(o.pageX,o.pageY,n,400),setTimeout(function(){s.wheelZoomCount--,!s.wheelZoomCount&&s.options.onZoomEnd&&s.options.onZoomEnd.call(s,o)},400)))):(r=s.x+t,l=s.y+e,r>0?r=0:r<s.maxScrollX&&(r=s.maxScrollX),l>s.minScrollY?l=s.minScrollY:l<s.maxScrollY&&(l=s.maxScrollY),void(s.maxScrollY<0&&s.scrollTo(s.x,l,0)))},_transitionEnd:function(o){var t=this;o.target==t.scroller&&(t._unbind(_),t._startAni())},_startAni:function(){var o,t,e,r=this,n=r.x,s=r.y,i=Date.now();if(!r.animating){if(!r.steps.length)return void r._resetPos(400);if(o=r.steps.shift(),o.x==n&&o.y==s&&(o.time=0),r.animating=!0,r.moved=!0,r.options.useTransition)return r._transitionTime(o.time),r._pos(o.x,o.y),r.animating=!1,void(o.time?r._bind(_):r._resetPos(0));e=function(){var a,c,p=Date.now();return p>=i+o.time?(r._pos(o.x,o.y),r.animating=!1,r.options.onAnimationEnd&&r.options.onAnimationEnd.call(r),void r._startAni()):(p=(p-i)/o.time-1,t=l.sqrt(1-p*p),a=(o.x-n)*t+n,c=(o.y-s)*t+s,r._pos(a,c),void(r.animating&&(r.aniTime=z(e))))},e()}},_transitionTime:function(o){o+="ms",this.scroller.style[p]=o,this.hScrollbar&&(this.hScrollbarIndicator.style[p]=o),this.vScrollbar&&(this.vScrollbarIndicator.style[p]=o)},_momentum:function(o,t,e,r,n){var s=6e-4,i=l.abs(o)/t,a=i*i/(2*s),c=0,p=0;return o>0&&a>e?(p=n/(6/(a/i*s)),e+=p,i=i*e/a,a=e):o<0&&a>r&&(p=n/(6/(a/i*s)),r+=p,i=i*r/a,a=r),a*=o<0?-1:1,c=i/s,{dist:a,time:l.round(c)}},_offset:function(o){for(var t=-o.offsetLeft,e=-o.offsetTop;o=o.offsetParent;)t-=o.offsetLeft,e-=o.offsetTop;return o!=this.wrapper&&(t*=this.scale,e*=this.scale),{left:t,top:e}},_snap:function(o,t){var e,r,n,s,i,a,c=this;for(n=c.pagesX.length-1,e=0,r=c.pagesX.length;e<r;e++)if(o>=c.pagesX[e]){n=e;break}for(n==c.currPageX&&n>0&&c.dirX<0&&n--,o=c.pagesX[n],i=l.abs(o-c.pagesX[c.currPageX]),i=i?l.abs(c.x-o)/i*500:0,c.currPageX=n,n=c.pagesY.length-1,e=0;e<n;e++)if(t>=c.pagesY[e]){n=e;break}return n==c.currPageY&&n>0&&c.dirY<0&&n--,t=c.pagesY[n],a=l.abs(t-c.pagesY[c.currPageY]),a=a?l.abs(c.y-t)/a*500:0,c.currPageY=n,s=l.round(l.max(i,a))||200,{x:o,y:t,time:s}},_bind:function(o,t,e){(t||this.scroller).addEventListener(o,this,!!e)},_unbind:function(o,t,e){(t||this.scroller).removeEventListener(o,this,!!e)},destroy:function(){var o=this;o.scroller.style[a]="",o.hScrollbar=!1,o.vScrollbar=!1,o._scrollbar("h"),o._scrollbar("v"),o._unbind(y,t),o._unbind(T),o._unbind(Y,e),o._unbind(X,e),o._unbind(w,e),o.options.hasTouch||(o._unbind("DOMMouseScroll"),o._unbind("mousewheel")),o.options.useTransition&&o._unbind(_),o.options.checkDOMChanges&&clearInterval(o.checkDOMTime),o.options.onDestroy&&o.options.onDestroy.call(o)},refresh:function(){var o,t,e,r,n=this,s=0,i=0;if(n.scale<n.options.zoomMin&&(n.scale=n.options.zoomMin),n.wrapperW=n.wrapper.clientWidth||1,n.wrapperH=n.wrapper.clientHeight||1,n.minScrollY=-n.options.topOffset||0,n.scrollerW=l.round(n.scroller.offsetWidth*n.scale),n.scrollerH=l.round((n.scroller.offsetHeight+n.minScrollY)*n.scale),n.maxScrollX=n.wrapperW-n.scrollerW,n.maxScrollY=n.wrapperH-n.scrollerH+n.minScrollY,n.dirX=0,n.dirY=0,n.options.onRefresh&&n.options.onRefresh.call(n),n.hScroll=n.options.hScroll&&n.maxScrollX<0,n.vScroll=n.options.vScroll&&n.scrollerH>n.wrapperH,n.hScrollbar=n.hScroll&&n.options.hScrollbar,n.vScrollbar=n.vScroll&&n.options.vScrollbar&&n.scrollerH>n.wrapperH,o=n._offset(n.wrapper),n.wrapperOffsetLeft=-o.left,n.wrapperOffsetTop=-o.top,n.wrapper.setAttribute("hScroll",n.hScroll),n.wrapper.setAttribute("vScroll",n.vScroll),"string"==typeof n.options.snap)for(n.pagesX=[],n.pagesY=[],r=n.scroller.querySelectorAll(n.options.snap),t=0,e=r.length;t<e;t++)s=n._offset(r[t]),s.left+=n.wrapperOffsetLeft,s.top+=n.wrapperOffsetTop,n.pagesX[t]=s.left<n.maxScrollX?n.maxScrollX:s.left*n.scale,n.pagesY[t]=s.top<n.maxScrollY?n.maxScrollY:s.top*n.scale;else if(n.options.snap){for(n.pagesX=[];s>=n.maxScrollX;)n.pagesX[i]=s,s-=n.wrapperW,i++;for(n.maxScrollX%n.wrapperW&&(n.pagesX[n.pagesX.length]=n.maxScrollX-n.pagesX[n.pagesX.length-1]+n.pagesX[n.pagesX.length-1]),s=0,i=0,n.pagesY=[];s>=n.maxScrollY;)n.pagesY[i]=s,s-=n.wrapperH,i++;n.maxScrollY%n.wrapperH&&(n.pagesY[n.pagesY.length]=n.maxScrollY-n.pagesY[n.pagesY.length-1]+n.pagesY[n.pagesY.length-1])}n._scrollbar("h"),n._scrollbar("v"),n.zoomed||(n.scroller.style[p]="0",n._resetPos(400))},scrollTo:function(o,t,e,r){var l,n,s=this,i=o;for(s.stop(),i.length||(i=[{x:o,y:t,time:e,relative:r}]),l=0,n=i.length;l<n;l++)i[l].relative&&(i[l].x=s.x-i[l].x,i[l].y=s.y-i[l].y),s.steps.push({x:i[l].x,y:i[l].y,time:i[l].time||0});s._startAni()},scrollToElement:function(o,t){var e,r=this;o=o.nodeType?o:r.scroller.querySelector(o),o&&(e=r._offset(o),e.left+=r.wrapperOffsetLeft,e.top+=r.wrapperOffsetTop,e.left=e.left>0?0:e.left<r.maxScrollX?r.maxScrollX:e.left,e.top=e.top>r.minScrollY?r.minScrollY:e.top<r.maxScrollY?r.maxScrollY:e.top,t=void 0===t?l.max(2*l.abs(e.left),2*l.abs(e.top)):t,r.scrollTo(e.left,e.top,t))},scrollToPage:function(o,t,e){var r,l,n=this;e=void 0===e?400:e,n.options.onScrollStart&&n.options.onScrollStart.call(n),n.options.snap?(o="next"==o?n.currPageX+1:"prev"==o?n.currPageX-1:o,t="next"==t?n.currPageY+1:"prev"==t?n.currPageY-1:t,o=o<0?0:o>n.pagesX.length-1?n.pagesX.length-1:o,t=t<0?0:t>n.pagesY.length-1?n.pagesY.length-1:t,n.currPageX=o,n.currPageY=t,r=n.pagesX[o],l=n.pagesY[t]):(r=-n.wrapperW*o,l=-n.wrapperH*t,r<n.maxScrollX&&(r=n.maxScrollX),l<n.maxScrollY&&(l=n.maxScrollY)),n.scrollTo(r,l,e)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(Y,e),this._unbind(X,e),this._unbind(w,e)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(_):M(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(o,t,e,r){var l=this,n=e/l.scale;l.options.useTransform&&(l.zoomed=!0,r=void 0===r?200:r,o=o-l.wrapperOffsetLeft-l.x,t=t-l.wrapperOffsetTop-l.y,l.x=o-o*n+l.x,l.y=t-t*n+l.y,l.scale=e,l.refresh(),l.x=l.x>0?0:l.x<l.maxScrollX?l.maxScrollX:l.x,l.y=l.y>l.minScrollY?l.minScrollY:l.y<l.maxScrollY?l.maxScrollY:l.y,l.scroller.style[p]=r+"ms",l.scroller.style[a]="translate("+l.x+"px,"+l.y+"px) scale("+e+")"+D,l.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},n=null,P.parentWrapper=E,t.Scroll=o.Scroll=P}}(window.Wade,window,document);